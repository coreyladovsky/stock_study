{"version":3,"sources":["webpack:///webpack/bootstrap f0c0d29396c632adb857","webpack:///./entry.js","webpack:///./cleanData.js","webpack:///./barGraph.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;AC7DmC;AACd;;AAErB;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,oBAAoB;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C,uBAAuB,yBAAyB;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA2E,qBAAqB;AAChG;AACA;AACA;;;;;;;;;AClLA;AACA;AACA;AACA;AACA;AACA,mCAAmC,cAAc,KAAK,GAAG,uCAAuC;AAChG,GAAG;AACH;AACA;AAAA;AAAA;;;AAGA;AACA;AACA,YAAY;AACZ,GAAG;AACH;AAAA;AAAA;;;;;;;;ACfA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC,mBAAmB,yBAAyB;AAC5C;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,iCAAiC,oBAAoB,EAAE;;AAEvD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f0c0d29396c632adb857","import { cleanerData, singleStock } from \"./cleanData.js\";\nimport { changePage } from \"./barGraph.js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  defaultStocks();\n});\n\nconst defaultStocks = () => {\n  // let defaults = [\"ROBO\", \"XLK\", \"VGT\", \"FDN\", \"IYW\"]\n  let defaults = [\"CHFS\", \"SLS\", \"NFEC\", \"MRNS\", \"NOG\"];\n  let promises = [];\n  for (var i = 0; i < defaults.length; i++) {\n    promises.push(fetchStock(defaults[i]));\n  }\n  Promise.all(promises).then(results => {\n    var stockData = results.map(res => {\n      return cleanerData(res);\n    });\n\n    const data = singleStock(stockData[0]);\n\n    const margin = { top: 30, bottom: 50, left: 50, right: 10 };\n\n    const width = 700 - margin.right - margin.left;\n    const height = 500 - margin.top - margin.bottom;\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    data.forEach(function(d) {\n      d.date = d.date;\n      d.ticker = d.ticker;\n    });\n\n    const makeSvg = className => {\n      return d3\n        .select(\"#root\")\n        .append(\"svg\")\n        .attr(\"height\", height + margin.left + margin.right + 50)\n        .attr(\"width\", \"100%\")\n        .attr(\"class\", className);\n    };\n\n    const maxAndMin = () => {\n      let max;\n      let min;\n      for (let i = 0; i < stockData.length; i++) {\n        for (var j = 0; j < stockData[i].length; j++) {\n          if (!min || parseInt(stockData[i][j][\"4. close\"]) < min) {\n            min = parseInt(stockData[i][j][\"4. close\"]);\n          }\n\n          if (!max || parseInt(stockData[i][j][\"4. close\"]) > max) {\n            max = parseInt(stockData[i][j][\"4. close\"]);\n          }\n        }\n      }\n      return [max, min];\n    };\n\n    var [max, min] = maxAndMin();\n\n\n\n    var x = d3\n      .scaleBand()\n      .rangeRound([0, width])\n      .padding(0.1)\n      .domain(\n        data.map(function(d) {\n          return d.date;\n        })\n      );\n\n    const y = d3\n      .scaleLinear()\n      .range([0, height])\n      .domain([0, max]);\n\n    var y2 = d3\n      .scaleLinear()\n      .rangeRound([0, height])\n      .domain([max, 0]);\n    //\n\n    const drawLine = d3\n      .line()\n      // .curve(d3.curveBasis)\n      .x(function(d) {\n        return x(d.date);\n      })\n      .y(function(d) {\n        return height + margin.top - y(d.close);\n      });\n\n    let svg = makeSvg(\"svg-all-stocks\");\n\n    let g = svg\n      .append(\"g\")\n      .attr(\"tranform\", \"translate(\" + 50 + \",\" + 10 + \")\");\n    //\n\n    g\n      .append(\"g\")\n      .attr(\"class\", \"x-axis\")\n      .attr(\"transform\", \"translate(0, \" + (height + margin.top) + \")\")\n      .call(d3.axisBottom(x));\n    //\n    g\n      .append(\"g\")\n      .attr(\"class\", \"y-axis\")\n      .attr(\"transform\", \"translate(50,\" + margin.top + \")\")\n      .call(d3.axisLeft(y2));\n\n    const makePath = (stockData, g, i, data) => {\n      g\n        .append(\"path\")\n        .data([data])\n        .attr(\"d\", drawLine)\n        .attr(\"class\", \"line2\")\n        .attr(\"transform\", \"translate(40,\" + margin.top + \")\")\n        .attr(\"stroke\", function(d) {\n          return color(d[0].ticker);\n        })\n        .attr(\"stroke-width\", \"2px\")\n        .attr(\"fill\", \"none\");\n\n      var a = g.append(\"g\").attr(\"transform\", function(d) {\n        return \"translate(700,\" + (100 + 30 * i) + \")\";\n      });\n\n      a\n        .append(\"rect\")\n        .data(data)\n        .attr(\"width\", 15)\n        .attr(\"height\", 15)\n        .attr(\"class\", function(d) {\n          return d.ticker + \" normal\";\n        })\n        .style(\"fill\", function(d) {\n          return color(d.ticker);\n        });\n\n      a\n        .append(\"text\")\n        .data(data)\n        .attr(\"dy\", \".8em\")\n        .attr(\"x\", 25)\n        .attr(\"fill\", \"black\")\n        .attr(\"class\", function(d) {\n          return d.ticker + \" normal \";\n        })\n        .text(function(d) {\n          return d.ticker;\n        })\n        .on(\"click\", function(d) {\n          changePage(stockData, d.ticker);\n        });\n    };\n\n    for (var i = 0; i < stockData.length; i++) {\n      let data = singleStock(stockData[i]);\n      makePath(stockData, g, i, data);\n    }\n  });\n};\n\nconst makeG = svg => {\n  return svg\n    .append(\"g\")\n    .attr(\"tranform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n    .attr(\"height\", height)\n    .attr(\"width\", width);\n};\n\nconst fetchStock = async ticker => {\n  let data = await (await fetch(\n    `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${ticker.toUpperCase()}&apikey=0FYYBJVW8H7H8BCY`\n  )).json();\n  return data;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./entry.js\n// module id = 0\n// module chunks = 0","export const cleanerData = data => {\n  let finalData = [];\n  let obj = data[\"Time Series (Daily)\"];\n  let lastSevenDates = Object.keys(obj).sort().slice(-7);\n  lastSevenDates.forEach((date) => {\n    finalData.push(Object.assign({}, obj[date], {date}, {ticker: data[\"Meta Data\"][\"2. Symbol\"]}));\n  });\n  return finalData;\n};\n\n\nexport const singleStock = array => {\n  return array.map((obj) => {\n    return { date: obj[\"date\"].slice(5), close: obj[\"4. close\"], ticker: obj[\"ticker\"]};\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./cleanData.js\n// module id = 2\n// module chunks = 0","const hideModal = () => {\n  let modal = document.getElementById(\"single-stock-container\");\n  modal.style.display = \"none\";\n};\n\nexport const changePage = (stockData, ticker) => {\n  let modal = document.getElementById(\"single-stock-container\");\n  modal.style.display = \"block\";\n  let open = [];\n  let close = [];\n  let high = [];\n  let low = [];\n  for (let i = 0; i < stockData.length; i++) {\n    for (var j = 0; j < stockData[i].length; j++) {\n      if (stockData[i][j].ticker === ticker) {\n        open.push(\n          {number: stockData[i][j][\"1. open\"],\n            date: stockData[i][j].date,\n            word: \"Open\"}\n        );\n        close.push(\n          {number: stockData[i][j][\"4. close\"],\n            date: stockData[i][j].date,\n            word: \"Close\"}\n        );\n        high.push(\n          {number: stockData[i][j][\"2. high\"],\n            date: stockData[i][j].date,\n            word: \"High\"}\n        );\n        low.push(\n          {number: stockData[i][j][\"3. low\"],\n            date: stockData[i][j].date,\n            word: \"Low\"}\n        );\n      }\n    }\n  }\n\n  let max;\n  for (var i = 0; i < high.length; i++) {\n    if(!max || parseFloat(high[i].number) > max) {\n      max = parseFloat(high[i].number);\n    }\n  }\n  let data = open;\n\n  data.forEach(function(d) {\n    // d.date = d.date.slice(5);\n    // d.close = +d[\"4. close\"];\n    // d.open = +d[\"1. open\"];\n    // d.low = +d[\"3. low\"];\n    // d.high = +d[\"2. high\"];\n    d.number = +d.number;\n    d.word = d.word;\n    d.date = d.date.slice(5);\n  });\n\n  let margin = { top: 20, right: 10, bottom: 100, left: 40 };\n  let width = 700 - margin.right - margin.left;\n  let height = 525 - margin.top - margin.bottom;\n  let color = d3.scaleOrdinal(d3.schemeCategory10);\n\n  let svg = d3\n    .select(\"#root2\")\n    .append(\"svg\")\n    .attr(\"height\", 700)\n    .attr(\"width\", 900)\n    .attr(\"class\", \"svg-single-stock\")\n    .on(\"click\", hideModal);\n\n  let g = svg.append(\"g\").attr(\"transform\", \"translate(\" + 50 + \",\" + 10 + \")\");\n\n  let x = d3\n  .scaleBand()\n  .rangeRound([0, width])\n  .padding(0.1)\n  .domain(\n    data.map(function(d) {\n      return d.date;\n    })\n  );\n\n  let y = d3\n    .scaleLinear()\n    .rangeRound([0, height])\n    .domain([\n      0,\n      max\n    ]);\n\n  let y2 = d3\n    .scaleLinear()\n    .rangeRound([0, height])\n    .domain([\n      max,\n      0\n    ]);\n\n  g\n    .selectAll(\"rect\")\n    .data(data)\n    .enter()\n    .append(\"rect\")\n    .attr(\"class\", \"bar\")\n    .attr(\"x\", function(d) {\n      return x(d.date);\n    })\n    .attr(\"y\", function(d) {\n      return 425 - y(d.number);\n    })\n    .attr(\"fill\", function(d) {\n      return color(d.word);\n    })\n    .attr(\"width\", 15)\n    .attr(\"height\", function(d) { return y(d.number); });\n\n  g\n    .append(\"g\")\n    .attr(\"class\", \"x-axis\")\n    .attr(\"transform\", \"translate(0,\" + (height + margin.top) + \")\")\n    .call(d3.axisBottom(x));\n\n  g\n    .append(\"g\")\n    .attr(\"class\", \"y-axis\")\n    .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n    .call(d3.axisLeft(y2));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./barGraph.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}